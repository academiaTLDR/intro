<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CIBS-Web 系統架構資訊圖表</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;700;800&family=Noto+Sans+TC:wght@300;400;500;700;900&display=swap');
        
        /* 加入平滑滾動，讓錨點點擊時有滑動效果 */
        html {
            scroll-behavior: smooth;
        }

        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #f0f9ff; /* Lightest Blue */
            color: #0f172a; /* Slate 900 */
        }

        body {
            font-family: 'Inter', 'Noto Sans TC', sans-serif;
            background-color: #f0f9ff; /* Lightest Blue */
            color: #0f172a; /* Slate 900 */
        }

        /* Chart Container Styling */
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 350px;
            max-height: 400px;
            background-color: white;
            border-radius: 0.5rem;
            padding: 1rem;
            box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
        }

        /* Timeline Styling */
        .timeline-line {
            position: absolute;
            left: 50%;
            top: 0;
            bottom: 0;
            width: 4px;
            background-color: #0ea5e9; /* Sky 500 */
            transform: translateX(-50%);
        }
        
        /* Architecture Diagram Boxes */
        .arch-box {
            transition: transform 0.2s;
        }
        .arch-box:hover {
            transform: translateY(-5px);
        }

        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 10px;
        }
        ::-webkit-scrollbar-track {
            background: #e0f2fe;
        }
        ::-webkit-scrollbar-thumb {
            background: #0284c7;
            border-radius: 5px;
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header Section -->
    <header class="bg-gradient-to-r from-slate-900 via-blue-900 to-slate-900 text-white py-16 px-4">
        <div class="max-w-6xl mx-auto text-center">
            <h1 class="text-5xl md:text-6xl font-extrabold tracking-tight mb-4">
                CIBS-Web
            </h1>
            <p class="text-xl md:text-2xl text-sky-200 font-light max-w-3xl mx-auto">
                以前端為主的學術文獻檢索與導讀 (TLDR) 系統
            </p>
            <div class="mt-8 flex justify-center gap-4 flex-wrap">
                <span class="bg-sky-500 text-white px-4 py-2 rounded-full font-semibold text-sm shadow-lg">純前端架構</span>
                <span class="bg-blue-600 text-white px-4 py-2 rounded-full font-semibold text-sm shadow-lg">無伺服器部署</span>
                <span class="bg-rose-500 text-white px-4 py-2 rounded-full font-semibold text-sm shadow-lg">安全代理層</span>
            </div>
            
            <!-- 頂部入口與錨點按鈕 -->
            <div class="mt-12 flex flex-col sm:flex-row justify-center items-center gap-6">
                <!-- <a href="#core-highlights" class="inline-flex items-center gap-2 bg-sky-500 text-white px-8 py-4 rounded-full font-bold text-lg shadow-xl hover:scale-105 hover:bg-sky-400 hover:shadow-2xl transition-all duration-300 ring-4 ring-sky-500/30">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 animate-bounce" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                    </svg>
                    <span>快速跳至：AI 核心亮點</span>
                </a>  -->
                <a href="#core-highlights" 
                    class="inline-flex items-center gap-2 bg-gradient-to-r from-indigo-500 via-purple-500 to-cyan-400 
                    text-white px-8 py-4 rounded-full font-bold text-lg 
                    shadow-xl hover:scale-105 hover:shadow-2xl 
                    transition-all duration-300 ring-4 ring-purple-400/30">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 animate-bounce" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                            <path stroke-linecap="round" stroke-linejoin="round" d="M19 14l-7 7m0 0l-7-7m7 7V3" />
                        </svg>
                        <span>快速跳至「AI 核心亮點」</span>
                    </a>
                <a href="https://cibs-astldr.vercel.app/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 bg-white text-blue-800 px-8 py-4 rounded-full font-bold text-lg shadow-xl hover:scale-105 hover:bg-sky-50 hover:shadow-2xl transition-all duration-300 ring-4 ring-blue-500/30">
                    <span>🚀 立即體驗實際系統</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                    </svg>
                </a>
            </div>
        </div>
    </header>

    <main class="max-w-7xl mx-auto px-4 py-12 space-y-20">

        <!-- Section 1: Introduction & KPIs -->
        <section>
            <div class="mb-10 text-center">
                <h2 class="text-3xl font-bold text-slate-800 mb-4">系統設計核心目標</h2>
                <p class="text-slate-600 max-w-3xl mx-auto leading-relaxed text-lg">
                    CIBS-Web 讓使用者可以在不依賴傳統龐大後端伺服器的情況下，搜尋、瀏覽和存取學術導讀 (TLDR) 與多媒體內容。它完美結合了靜態網頁代管與雲端儲存 API 的優勢。
                </p>
            </div>

            <!-- KPI Cards -->
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
                <!-- Card 1 -->
                <div class="bg-white rounded-xl shadow-lg p-6 border-b-4 border-sky-500 hover:shadow-xl transition-shadow">
                    <div class="text-sky-500 text-4xl font-bold mb-2">100%</div>
                    <h3 class="font-bold text-slate-700 text-lg">純前端架構</h3>
                    <p class="text-sm text-slate-500 mt-2">核心邏輯皆部署於客戶端 JS 與靜態 Markdown 檔案中。</p>
                </div>
                <!-- Card 2 -->
                <div class="bg-white rounded-xl shadow-lg p-6 border-b-4 border-blue-500 hover:shadow-xl transition-shadow">
                    <div class="text-blue-500 text-4xl font-bold mb-2">2 個</div>
                    <h3 class="font-bold text-slate-700 text-lg">CSV 輕量索引</h3>
                    <p class="text-sm text-slate-500 mt-2">使用 CSV 作為中介資料 (Metadata) 與外部連結的輕量級「資料庫」。</p>
                </div>
                <!-- Card 3 -->
                <div class="bg-white rounded-xl shadow-lg p-6 border-b-4 border-teal-500 hover:shadow-xl transition-shadow">
                    <div class="text-teal-500 text-4xl font-bold mb-2">0</div>
                    <h3 class="font-bold text-slate-700 text-lg">檔案外流</h3>
                    <p class="text-sm text-slate-500 mt-2">Next.js 代理層隱匿真實路徑，避免未經授權的靜態資源抓取。</p>
                </div>
                <!-- Card 4 -->
                <div class="bg-white rounded-xl shadow-lg p-6 border-b-4 border-rose-500 hover:shadow-xl transition-shadow">
                    <div class="text-rose-500 text-4xl font-bold mb-2">安全</div>
                    <h3 class="font-bold text-slate-700 text-lg">身分驗證機制</h3>
                    <p class="text-sm text-slate-500 mt-2">結合 Vercel 環境變數與 Basic Auth 實作嚴謹的存取控制。</p>
                </div>
            </div>
        </section>

        <!-- Section 2: Architecture Diagram (HTML/CSS) -->
        <section class="bg-slate-50 rounded-2xl p-8 border border-slate-200">
            <div class="mb-8">
                <h2 class="text-3xl font-bold text-slate-800 mb-4 border-l-4 border-blue-600 pl-4">系統架構總覽</h2>
                <p class="text-slate-600 text-lg">
                    本系統架構將前端介面與資料儲存層徹底解耦。透過 Next.js 作為安全代理層 (Proxy)，在提供 GitHub 內容或 Google Drive 連結前，確保所有存取請求皆具備合法授權。
                </p>
            </div>

            <!-- Conceptual Flowchart using CSS Grid -->
            <div class="relative max-w-4xl mx-auto">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8 text-center items-center">
                    
                    <!-- Top Level: User -->
                    <div class="md:col-span-3 flex justify-center">
                        <div class="arch-box bg-slate-800 text-white w-64 p-4 rounded-lg shadow-lg z-10">
                            <div class="text-2xl mb-1">👤</div>
                            <div class="font-bold tracking-wider">使用者瀏覽器 (Client)</div>
                            <div class="text-xs text-slate-400 mt-1">Web UI 瀏覽與操作</div>
                        </div>
                    </div>

                    <!-- Arrow Down -->
                    <div class="md:col-span-3 flex justify-center -my-4 z-0">
                        <div class="text-4xl text-slate-300">⬇</div>
                    </div>

                    <!-- Middle Level: Proxy -->
                    <div class="md:col-span-3 flex justify-center">
                        <div class="arch-box bg-rose-600 text-white w-72 p-4 rounded-lg shadow-lg z-10 border-2 border-rose-400">
                            <div class="text-2xl mb-1">🛡️</div>
                            <div class="font-bold tracking-wider">Next.js 安全代理層</div>
                            <div class="text-xs text-rose-100 mt-1">基本帳密認證 (Basic Auth)</div>
                        </div>
                    </div>

                    <!-- Arrow Split -->
                    <div class="md:col-span-3 grid grid-cols-2 gap-4 -my-4 z-0">
                        <div class="text-right text-4xl text-slate-300 pr-12">↙</div>
                        <div class="text-left text-4xl text-slate-300 pl-12">↘</div>
                    </div>

                    <!-- Bottom Level: Resources -->
                    <!-- Left: GitHub -->
                    <div class="flex flex-col items-center">
                        <div class="arch-box bg-slate-700 text-white w-full max-w-xs p-4 rounded-lg shadow-lg h-32 flex flex-col justify-center">
                            <div class="text-2xl mb-1">💻</div>
                            <div class="font-bold tracking-wider">GitHub 靜態資源庫 (Private)</div>
                            <div class="text-xs text-slate-300 mt-1">HTML / CSS / JS / Markdown</div>
                        </div>
                    </div>

                    <!-- Center Spacer for visual balance -->
                    <div class="hidden md:block"></div>

                    <!-- Right: Google Drive -->
                    <div class="flex flex-col items-center">
                        <div class="arch-box bg-blue-600 text-white w-full max-w-xs p-4 rounded-lg shadow-lg h-32 flex flex-col justify-center">
                            <div class="text-2xl mb-1">☁️</div>
                            <div class="font-bold tracking-wider">Google Drive 雲端儲存</div>
                            <div class="text-xs text-blue-200 mt-1">PDF 原文檔案 / Podcast 音檔</div>
                        </div>
                    </div>

                </div>
                
                <!-- Legend -->
                <div class="mt-8 flex justify-center gap-6 text-sm">
                    <div class="flex items-center gap-2"><div class="w-3 h-3 bg-slate-800 rounded-full"></div>客戶端</div>
                    <div class="flex items-center gap-2"><div class="w-3 h-3 bg-rose-600 rounded-full"></div>安全防護</div>
                    <div class="flex items-center gap-2"><div class="w-3 h-3 bg-blue-600 rounded-full"></div>資料儲存</div>
                </div>
            </div>
        </section>
        
        <!-- Section 3: TLDR intro -->
        <section id="core-highlights" class="relative bg-white rounded-3xl shadow-xl p-8 md:p-16 overflow-hidden border border-slate-100">
            <!-- 裝飾用背景圓圈 -->
            <div class="absolute top-0 left-0 -translate-x-1/2 -translate-y-1/2 w-96 h-96 bg-indigo-50 rounded-full blur-3xl opacity-50 z-0"></div>
            <div class="absolute bottom-0 right-0 translate-x-1/3 translate-y-1/3 w-[30rem] h-[30rem] bg-fuchsia-50 rounded-full blur-3xl opacity-50 z-0"></div>
            
            <div class="relative z-10 mb-16 text-center">
                <span class="inline-block bg-gradient-to-r from-indigo-500 to-fuchsia-500 text-white px-5 py-2 rounded-full text-xl font-bold tracking-widest mb-6">自動摘要 × 智慧推薦</span>
                <h2 class="text-4xl md:text-5xl font-extrabold text-slate-800 mb-6">讓每一篇論文，都能在 60 秒內讀懂</h2>
                <p class="text-slate-600 max-w-4xl mx-auto text-xl leading-relaxed text-left">
                    讓 AI 在系統建置階段，就把論文「全部讀完」。它會產出兩種深度摘要：一種給專業研究者，一種給沒有背景的人。同時建立語意向量與知識關聯，讓每篇文章都能自動推薦最相關的研究。沒有即時運算壓力，沒有資料庫依賴，前端打開的瞬間，就是整理好的智慧知識網絡。
                </p>
            </div>

            <!-- 特色 1：巨型區塊展示 -->
            <div class="relative z-10 flex flex-col lg:flex-row items-center gap-12 mb-20 bg-slate-50 p-10 rounded-3xl border-l-8 border-indigo-500">
                <div class="w-full lg:w-1/3 flex justify-center">
                    <div class="text-9xl">🤖</div>
                </div>
                <div class="w-full lg:w-2/3">
                    <h3 class="text-3xl font-bold text-slate-800 mb-4">自動化「雙模式」文獻導讀 (TLDR)</h3>
                    <p class="text-slate-600 mb-6 text-lg leading-relaxed">
                        運用先進生成式 AI，將動輒數十頁的艱澀論文瞬間轉化為結構化、易於閱讀的 Markdown 導讀檔案。並針對不同受眾自動產出兩種深度的內容，同時內建「格式驗證」，以確保TLDR品質：
                    </p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-6">
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                            <div class="flex items-center gap-3 mb-3">
                                <span class="bg-indigo-100 text-indigo-700 p-2 rounded-lg text-xl">🔬</span>
                                <h4 class="text-xl font-bold text-slate-800">專業技術模式 (Tech)</h4>
                            </div>
                            <p class="text-slate-600 leading-relaxed">
                                專為領域專家量身打造。以極度客觀、嚴謹的視角，精準萃取文獻的「核心貢獻」與「研究侷限」，並強制要求 AI 高亮標示所有關鍵數據指標 (如樣本數 N、p值、效應量)，讓研究員能在一分鐘內掌握論文的學術價值。
                            </p>
                        </div>
                        <div class="bg-white p-6 rounded-2xl shadow-sm border border-slate-200">
                            <div class="flex items-center gap-3 mb-3">
                                <span class="bg-amber-100 text-amber-700 p-2 rounded-lg text-xl">☕</span>
                                <h4 class="text-xl font-bold text-slate-800">白話科普模式 (Ess)</h4>
                            </div>
                            <p class="text-slate-600 leading-relaxed">
                                打破知識高牆，專為非本科系大眾設計。系統會自動過濾生硬的學術黑話 (如異質性、內生性)，並強制轉換為「排隊買珍奶」、「百貨打折」等生活化直覺比喻。讓任何人都能零門檻吸收前沿的學術知識。
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- 特色 2：巨型區塊展示 -->
            <div class="relative z-10 flex flex-col lg:flex-row-reverse items-center gap-12 bg-slate-50 p-10 rounded-3xl border-r-8 border-fuchsia-500">
                <div class="w-full lg:w-1/3 flex justify-center">
                    <div class="text-9xl">🔗</div>
                </div>
                <div class="w-full lg:w-2/3">
                    <h3 class="text-3xl font-bold text-slate-800 mb-4">無資料庫的「語意推薦引擎」</h3>
                    <p class="text-slate-600 mb-6 text-lg leading-relaxed">
                        打破傳統關聯式資料庫 (RDB) 的包袱，系統在靜態建置階段便完成了全域的知識網絡串聯。藉由高階語意分析，找出看似不相關但概念相通的研究，並將結果直接寫入前端介面，達成「零即時運算成本」的精準推薦。
                    </p>
                    <div class="space-y-6">
                        <div class="flex items-start gap-4 bg-white p-5 rounded-2xl shadow-sm border border-slate-200">
                            <div class="bg-fuchsia-100 text-fuchsia-700 p-3 rounded-xl text-2xl mt-1">📊</div>
                            <div>
                                <h4 class="text-xl font-bold text-slate-800 mb-2">高維度向量化 (Embeddings)</h4>
                                <p class="text-slate-600 leading-relaxed">
                                    系統自動掃描所有文獻的學術標籤與核心摘要，並運用 Embedding 模型，將純文字特徵轉換為高達 768 維的數學語意向量。這不僅僅是呆板的關鍵字比對，更是對整份文獻「底層概念與脈絡」的深度理解。
                                </p>
                            </div>
                        </div>
                        <div class="flex items-start gap-4 bg-white p-5 rounded-2xl shadow-sm border border-slate-200">
                            <div class="bg-pink-100 text-pink-700 p-3 rounded-xl text-2xl mt-1">📐</div>
                            <div>
                                <h4 class="text-xl font-bold text-slate-800 mb-2">餘弦相似度矩陣 (Cosine Similarity)</h4>
                                <p class="text-slate-600 leading-relaxed">
                                    在獲取全庫文獻的語意向量後，系統會執行龐大的一對多矩陣運算。精準篩選出語意距離最近、關聯度最高的前 5 篇文獻，並將推薦連結無縫且靜態地整合至使用者的 Markdown 閱讀介面中。
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Section 4: Data Composition & Strategy -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8">
            <!-- Text Content -->
            <div class="flex flex-col justify-center">
                <h2 class="text-3xl font-bold text-slate-800 mb-4 border-l-4 border-teal-500 pl-4">資料組成策略</h2>
                <p class="text-slate-600 mb-6 leading-relaxed">
                    CIBS-Web 採用混合儲存策略。大型多媒體檔案 (PDF/音檔) 託管於 Google Drive 以降低部署負載；文字型導讀 (TLDR) 則採用 Markdown 格式儲存於 GitHub，利於版本控管與協作編輯。
                </p>
                <div class="bg-white p-4 rounded-lg shadow border-l-4 border-blue-500">
                    <h4 class="font-bold text-slate-800">為什麼使用 CSV？</h4>
                    <p class="text-sm text-slate-600 mt-1 leading-relaxed">
                        透過預先建置的 <code>links.csv</code> 與 <code>journal_list.csv</code> 作為靜態資料索引，前端程式可直接於記憶體內執行高效查找與過濾，免去建置與維護傳統關聯式資料庫 (RDB) 的成本。
                    </p>
                </div>
            </div>

            <!-- Chart: Content Distribution -->
            <div class="flex flex-col items-center">
                <div class="chart-container">
                    <canvas id="compositionChart"></canvas>
                </div>
                <p class="text-center text-sm text-slate-500 mt-3 font-medium">圖 1：資料類型與儲存空間分佈</p>
            </div>
        </section>

        <!-- Section 5: Performance Comparison -->
        <section class="grid grid-cols-1 md:grid-cols-2 gap-8 flex-row-reverse">
            <!-- Chart: Performance -->
            <div class="flex flex-col items-center md:order-1">
                <div class="chart-container">
                    <canvas id="performanceChart"></canvas>
                </div>
                <p class="text-center text-sm text-slate-500 mt-3 font-medium">圖 2：資源解析效率比較 (概念模型)</p>
            </div>

            <!-- Text Content -->
            <div class="flex flex-col justify-center md:order-2">
                <h2 class="text-3xl font-bold text-slate-800 mb-4 border-l-4 border-sky-500 pl-4">存取效能最佳化機制</h2>
                <p class="text-slate-600 mb-6 leading-relaxed">
                    藉由初始化時預先載入 <code>links.csv</code> 映射索引，系統可避免在瀏覽過程頻繁發起對 Google Drive 的 API 請求。此「預先索引 (Index First)」策略顯著降低了資源解析的延遲。
                </p>
                <ul class="space-y-4">
                    <li class="flex items-center gap-3 bg-slate-50 p-3 rounded-lg border border-slate-100">
                        <span class="text-sky-500 text-2xl">⚡</span>
                        <span class="text-slate-700 text-left"><strong>預先索引建置：</strong> 系統初始化階段即非同步載入連結映射表。</span>
                    </li>
                    <li class="flex items-center gap-3 bg-slate-50 p-3 rounded-lg border border-slate-100">
                        <span class="text-sky-500 text-2xl">📂</span>
                        <span class="text-slate-700 text-left"><strong>無縫備援機制：</strong> 查無連結時，系統自動啟用 Fallback 解析至預設路徑。</span>
                    </li>
                    <li class="flex items-center gap-3 bg-slate-50 p-3 rounded-lg border border-slate-100">
                        <span class="text-sky-500 text-2xl">🚀</span>
                        <span class="text-slate-700 text-left"><strong>資源延遲載入：</strong> Markdown 導讀內容僅使用者觸發點擊時動態獲取與渲染。</span>
                    </li>
                </ul>
            </div>
        </section>

        <!-- Section 6: User Journey (Timeline) -->
        <section>
            <div class="mb-10 text-center">
                <h2 class="text-3xl font-bold text-slate-800 mb-4">使用者互動流程</h2>
                <p class="text-slate-600 max-w-2xl mx-auto text-lg">
                    從前端初始化至文獻資源請求，系統各層級間的資料流與狀態轉換。
                </p>
            </div>

            <div class="relative max-w-3xl mx-auto py-8">
                <!-- Vertical Line -->
                <div class="timeline-line hidden md:block"></div>

                <!-- Step 1 -->
                <div class="relative flex flex-col md:flex-row items-center justify-between mb-12">
                    <div class="order-1 md:w-5/12"></div>
                    <div class="z-20 flex items-center order-1 bg-sky-500 shadow-xl w-10 h-10 rounded-full justify-center text-white font-bold text-xl">1</div>
                    <div class="order-1 md:w-5/12 bg-white rounded-lg shadow-md p-6 mt-4 md:mt-0 border-l-4 border-sky-500 transition-transform hover:-translate-y-1 text-left">
                        <h3 class="font-bold text-lg text-slate-800">載入與初始化</h3>
                        <p class="text-sm text-slate-600 mt-2 leading-relaxed">
                            使用者存取系統入口 (<code>index.html</code>)。系統非同步載入 <code>links.csv</code> 建立全域連結映射表，並載入 <code>journal_list.csv</code> 作為首頁推薦引擎之基底。
                        </p>
                    </div>
                </div>

                <!-- Step 2 -->
                <div class="relative flex flex-col md:flex-row items-center justify-between mb-12">
                    <!-- 移除 md:text-right 確保靠左對齊 -->
                    <div class="order-1 md:w-5/12 bg-white rounded-lg shadow-md p-6 mt-4 md:mt-0 border-r-4 border-blue-500 md:border-l-0 border-l-4 transition-transform hover:-translate-y-1 text-left">
                        <h3 class="font-bold text-lg text-slate-800">檢索與資料過濾</h3>
                        <p class="text-sm text-slate-600 mt-2 leading-relaxed">
                            根據使用者提交之查詢參數 (q, label, status)，<code>show.js</code> 於客戶端記憶體中對主資料陣列進行篩選，並執行分頁渲染運算。
                        </p>
                    </div>
                    <div class="z-20 flex items-center order-1 bg-blue-500 shadow-xl w-10 h-10 rounded-full justify-center text-white font-bold text-xl">2</div>
                    <div class="order-1 md:w-5/12"></div>
                </div>

                <!-- Step 3 -->
                <div class="relative flex flex-col md:flex-row items-center justify-between mb-12">
                    <div class="order-1 md:w-5/12"></div>
                    <div class="z-20 flex items-center order-1 bg-teal-500 shadow-xl w-10 h-10 rounded-full justify-center text-white font-bold text-xl">3</div>
                    <div class="order-1 md:w-5/12 bg-white rounded-lg shadow-md p-6 mt-4 md:mt-0 border-l-4 border-teal-500 transition-transform hover:-translate-y-1 text-left">
                        <h3 class="font-bold text-lg text-slate-800">動態資源解析</h3>
                        <p class="text-sm text-slate-600 mt-2 leading-relaxed">
                            針對檢索結果，系統自動比對 <code>linksMap</code> 索引。若吻合則套用 Google Drive 公開連結；若無則啟用 Fallback 機制，退回預設之傳統路徑。
                        </p>
                    </div>
                </div>

                <!-- Step 4 -->
                <div class="relative flex flex-col md:flex-row items-center justify-between">
                    <!-- 移除 md:text-right 確保靠左對齊 -->
                    <div class="order-1 md:w-5/12 bg-white rounded-lg shadow-md p-6 mt-4 md:mt-0 border-r-4 border-rose-500 md:border-l-0 border-l-4 transition-transform hover:-translate-y-1 text-left">
                        <h3 class="font-bold text-lg text-slate-800">內容呈現與存取</h3>
                        <p class="text-sm text-slate-600 mt-2 leading-relaxed">
                            使用者可選擇檢視「TLDR」(透過 marked.js 即時轉譯 Markdown 並以浮動視窗呈現) 或查閱「PDF」(直接安全重導向至 Google Drive 原文檔案)。
                        </p>
                    </div>
                    <div class="z-20 flex items-center order-1 bg-rose-500 shadow-xl w-10 h-10 rounded-full justify-center text-white font-bold text-xl">4</div>
                    <div class="order-1 md:w-5/12"></div>
                </div>

            </div>
        </section>

        <!-- 底部專屬 Call to Action 區塊 -->
        <section class="bg-gradient-to-br from-blue-700 to-sky-500 rounded-3xl p-10 md:p-16 text-center text-white shadow-2xl relative overflow-hidden">
            <!-- 背景裝飾 -->
            <div class="absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white opacity-10 rounded-full blur-2xl"></div>
            <div class="absolute bottom-0 left-0 -mb-10 -ml-10 w-40 h-40 bg-white opacity-10 rounded-full blur-2xl"></div>
            
            <div class="relative z-10">
                <h2 class="text-3xl md:text-4xl font-extrabold mb-4">準備好親自操作了嗎？</h2>
                <p class="text-sky-100 text-lg md:text-xl mb-8 max-w-2xl mx-auto leading-relaxed">
                    前往 CIBS-Web 成果頁面，體驗輕量化架構帶來的文獻檢索與導讀服務。
                </p>
                <a href="https://cibs-astldr.vercel.app/" target="_blank" rel="noopener noreferrer" class="inline-flex items-center gap-2 bg-slate-900 text-white px-10 py-5 rounded-full font-bold text-xl shadow-lg hover:shadow-2xl hover:-translate-y-1 hover:bg-slate-800 transition-all duration-300">
                    <span>前往 CIBS-Web 成果網頁</span>
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M14 5l7 7m0 0l-7 7m7-7H3" />
                    </svg>
                </a>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center text-slate-400 py-10 border-t border-slate-200 mt-10">
            <p class="text-sm font-medium">CIBS-Web 專案架構資訊圖表</p>
            <p class="text-xs mt-2 text-slate-300">使用 Chart.js & Tailwind CSS 生成</p>
        </footer>

    </main>

    <!-- JavaScript for Charts -->
    <script>
        // --- Utility: Label Wrapping Logic (16 char limit) ---
        function formatLabel(str, maxwidth) {
            var sections = [];
            var words = str.split(" ");
            var temp = "";
            words.forEach(function(item, index) {
                if (temp.length > 0) {
                    var concat = temp + ' ' + item;
                    if (concat.length > maxwidth) {
                        sections.push(temp);
                        temp = "";
                    } else {
                        if (index == (words.length - 1)) {
                            sections.push(concat);
                            return;
                        } else {
                            temp = concat;
                            return;
                        }
                    }
                }
                if (index == (words.length - 1)) {
                    sections.push(item);
                    return;
                }
                if (item.length < maxwidth) {
                    temp = item;
                } else {
                    sections.push(item);
                }
            });
            return sections;
        }

        // --- Shared Tooltip Configuration ---
        const commonTooltipOptions = {
            callbacks: {
                title: function(tooltipItems) {
                    const item = tooltipItems[0];
                    let label = item.chart.data.labels[item.dataIndex];
                    if (Array.isArray(label)) {
                        return label.join(' ');
                    } else {
                        return label;
                    }
                }
            }
        };

        Chart.defaults.font.family = "'Inter', 'Noto Sans TC', sans-serif";

        // --- Chart 1: Data Composition (Doughnut) ---
        const ctxComposition = document.getElementById('compositionChart').getContext('2d');
        const compositionLabels = [
            "前端程式碼 (GitHub)",
            "Markdown 導讀 (GitHub)",
            "PDF 文件 (Google Drive)",
            "音頻資料 (Google Drive)"
        ];

        new Chart(ctxComposition, {
            type: 'doughnut',
            data: {
                labels: compositionLabels,
                datasets: [{
                    label: '資料儲存分佈 (%)',
                    data: [4, 1, 15, 80],
                    backgroundColor: [
                        '#0f172a', // Slate 900
                        '#0ea5e9', // Sky 500
                        '#3b82f6', // Blue 500
                        '#f43f5e'  // Rose 500
                    ],
                    borderWidth: 0,
                    hoverOffset: 4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            usePointStyle: true, // 使用圓點代替方塊，完美解決過度擁擠與排版問題
                            padding: 20,         // 增加項目間距
                            font: { family: "'Inter', 'Noto Sans TC', sans-serif", size: 13 }
                        }
                    },
                    tooltip: commonTooltipOptions
                }
            }
        });

        // --- Chart 2: Performance (Bar) ---
        const ctxPerformance = document.getElementById('performanceChart').getContext('2d');
        const perfLabels = [
            "資源解析速度",
            "系統初始載入",
            "資料新鮮度 (同步率)"
        ];
        const wrappedPerfLabels = perfLabels.map(l => formatLabel(l, 16));

        new Chart(ctxPerformance, {
            type: 'bar',
            data: {
                labels: wrappedPerfLabels,
                datasets: [
                    {
                        label: '啟用 CSV 靜態索引',
                        data: [95, 90, 85],
                        backgroundColor: '#14b8a6', // Teal 500
                        borderRadius: 4
                    },
                    {
                        label: '傳統動態 API 請求',
                        data: [40, 60, 95],
                        backgroundColor: '#cbd5e1', // Slate 300
                        borderRadius: 4
                    }
                ]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: {
                        beginAtZero: true,
                        max: 100,
                        title: {
                            display: true,
                            text: '效能指標 (滿分100)'
                        }
                    },
                    x: {
                        ticks: {
                            autoSkip: false,
                            maxRotation: 0
                        }
                    }
                },
                plugins: {
                    legend: {
                        position: 'bottom',
                        labels: {
                            usePointStyle: true, // 同樣使用圓點
                            padding: 20,
                            font: { family: "'Inter', 'Noto Sans TC', sans-serif", size: 13 }
                        }
                    },
                    tooltip: commonTooltipOptions
                }
            }
        });

    </script>
</body>
</html>
